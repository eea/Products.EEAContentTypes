Changelog
=========

10.4.dev0 - (unreleased)
------------------------
* Change: adjusted related.txt tests after the update done to
  eea_default_workflow now that we don't have the same states and transitions
  anymore
  [ichimdav refs #22596]
* Cleanup: removed visibilityLevel from Highlight as the feature was deprecated
  for a long time already, being hidden from the user
  [ichimdav refs #25986]
* Cleanup: removed the portlet_email_queue.pt, as we don't use Munin and 
  Newsletter tool anymore
  [ghicaale refs #24861]

10.3 - (2015-06-02)
-------------------
* Bug fix: EEAContentTypes related bottom_media now correctly reference the
  IVideo interface of eea.mediacentre
  [ichimdav refs #25835]
* Change: location field is no longer added on AssessmentPart and Assessment.
  This is needed in order to have the locations of Assessment comming from a
  ComputedField
  [ichimdav refs #22232]

10.2 - (2015-05-15)
-------------------
* Change: fixed testsyndication date test to check for utcdatetime since there
  was a difference between utc and gmt timezones after having jenkins with docker
  [ichimdav]
* Change: flahfile templates now fill content-core instead of main. This change
  was needed in order to display the archive message
  [ichimdav refs #25013]

10.1 - (2015-05-05)
-------------------
* Bug fix: ignore errors from old flash objects, which are now deprecated.
* Bug fix: pass info instead of region to close_dialog when we have an indicator
  [ichimdav #24322]

10.0 - (2015-03-17)
-------------------
* Cleanup: Removed "Global promotions" portlet references
  [voineali refs #23725]
* Change: Switched to curl in the jenkins build install script
  [olimpiurob refs #22402]
* Change: Changed fetch url for jenkins build install script to the install
  script from the main EEA CPB repository
  [olimpiurob refs #22402]

9.9 - (2015-02-03)
------------------
* Bug fix: fixed the edit translation page in order to get the form values
  from the translation and from the canonical object.
  [ghicaale refs #22709]

9.8 - (2015-01-22)
------------------
* Change: sender information for WorkflowEmails is now using the
  default username and email address added on the portal root properties
  [ichimdav refs #21893]
* Change: removed map view location calls now that acgis
  map is no longer available within eea.geotags
  [ichimdav]

9.7 - (2014-11-20)
------------------
* Feature: Also invalidate parents image scales on eea.cache
  custom invalidation events
  [voineali refs refs #21852, #21850, #21851]
* Bugfix: return out of the imageMinSize validator when it receives a
  DELETE_IMAGE value which occours when deleting an image
  [ichimdav refs #21637]
* Change: updated eea.geotags field labels
  [ghicaale refs #21458]

9.6 - (2014-10-15)
------------------
* Bug fix: Fixed ValueError: The permission *Delete portal content* is invalid
  within tests.
  [voineali refs #21234]
* Feature: disabled adding form for "Quick Events" by anonymous
  [ghicaa refs #21123]

9.5 - (2014-09-15)
------------------
* Bug fix: Patched revertversion.py script to save current state of the object
  before reverting it to an older version in order to easily recover this state
  later if needed
  [voineali refs #20934]

9.4 - (2014-08-27)
------------------
* Change: Remove deprecated cache subscriber
  [voineali refs #20678]
* Bug fix: fixed tests to fit new delete permissions
  [ghicaale refs #20666]
* Bug fix: fix the temporal widget when form validation is triggered
  [ghicaale refs #20833]

9.3 - (2014-07-16)
------------------
* Feature: set base_view as default view for NegotiatedProcedure and
  CallForProposal content types.
  [ghicaale refs #17865]

9.2 - (2014-07-15)
------------------
* Feature: added unit test which asserts that the effective
  date is set to contenttypes that can be published
  [ichimdav refs #18601]

9.1 - (2014-06-30)
------------------
* Bug fix: fixing temporal coverage save for -1 value
  [batradav #7973]

9.0 - (2014-06-10)
------------------
* Feature: updating temporal coverage widget
  [batradav #7973]

8.9 - (2014-05-13)
------------------
* Change: staff page no longer inserts the emails through script tags
  and document.write which broke the page when jQuery re-evaluated them
  [ichimdav refs #19369]
* Upgrade step: (optional) Review and enable Comments content-rules
  within Site Setup > Content Rules
  [voineali refs #19216]
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types
  [voineali refs #19216]
* Change: removed special handling of AssessmentPart and Assessment when
  using the location schema extender
  [ichimdav refs #18921]

8.8 - (2014-03-10)
------------------
* Change: readded return statements for geotags subtyper, for some
  reason having just one return removed the widget for some content types
  [ichimdav]

8.7 - (2014-03-10)
------------------
* Change: hide location field for AssessmentPart since it is
  computed from the locations of it's related items
  [ichimdav refs #18602]
* Change: label changed from "Call for ID" to "Reference ID"
  [ghicaale refs #17865]

8.6 - (2014-02-13)
------------------
* Upgrade step: Remove CFTRequestor CT
  [olimpiurob refs #18443]
* Bug fix: fixed content rule for enabling/disabling discussions
  [olimpiurob refs #18453]

8.5 - (2014-02-03)
------------------
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types
  [mironovi refs #17865]
* Feature: Added new content types "Negotiated procedure" and "Call for
  proposal"
  [mironovi refs #17865]

8.4 - (2014-01-22)
------------------
* Change: no longer trigger AttributeError when attempting to retrieve
  the temporalCoverage data which was something that was needed only for
  indexing
  [ichimdav refs #16719]
* Change: removed publishDate and expiryDate fields along with their
  corresponding code
  [ichimdav refs #17611]
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types
  [voineali refs #17611]
* Cleanup: Remove unused Glossary content-type
  [voineali refs #17736]
* Change: removed the Data and EEAFigure from the list of portal_types that
  did not use the temporalCoverage schemaextender
  [ichimdav refs #17611]
* Change: make use of the macros from eea.forms when displaying the temporal
  and geographical coverage viewlets
  [ichimdav refs #17611]
* Change: added notoc classes for Geographical and Temporal Coverage viewlet
  headers as they shouldn't appear within the document table of contents
  [ichimdav fixes #17636]
* Change: clear session messages after schemata_edit popup submission
  [simiamih refs #16797]

8.3 - (2013-12-10)
------------------
* Bug fix: fixed ReST markup of HISTORY.txt
  [ghicaale refs #17716]

8.2 - (2013-12-10)
------------------
* Feature: SOER2015 base content now provides IEEAContent interface
  [ichimdav refs #17610]
* Change: removed : from "Temporal coverage:" heading
  [alecghica]
* Change: removed : from "Geographical coverage:" heading
  [alecghica]

8.1 - (2013-11-29)
------------------
* Change: removed unused and redundant fields in infographic.
  [demarant refs #17505]
* Feature: display the readiness portlet on top of the portlet manager in order
  to preserve consistency with the behavior of the indicators contenttypes
  [ichimdav refs #17505]

8.0 - (2013-11-28)
------------------
* Change: moved the ITemporalCoverageAdapter from eea.dataservice within
  Products.EEAContentTypes
  [ichimdav refs #17588]
* Feature: added Infographic ContentTypes to Products.EEAContentTypes
  [ichimdav refs #17505]
* Change: removed the dependecy to eea.locationwidget
  [ghicaale refs #9155]
* Change: cleanup old geo implementation
  [ghicaale refs #9155]
* Cleanup: removed unused interface
  [ghicaale refs #17588]

7.9 - (2013-11-21)
------------------
* Feature: added getTemporalCoverage indexer for contenttypes that implement
  IEEAContent or IEEAPossibleContent
  [ichimdav refs #16719]
* Change: enabled temporalCoverage schemaextender for IEEAContent interface
  without being required
  [ichimdav refs #16719]
* Feature: EEA ContentTypes implement IEEAContent interface
  [ichimdav refs #16719]
* Feature: Added IEEAPossibleContent base interface which will mark our of our
  Content Types that have no direct classes, instead using the ATContent classes
  [ichimdav refs #16719]
* Feature: Added IEEAContent base interface which will mark our of our Content
  Types
  [ichimdav refs #16719]

7.8 - (2013-10-22)
------------------
* Bug fix: no longer create keyFacts within portal_factory
  [ichimdav refs #17005]
* Bug fix: dump xml file when not possible to parse as rdf,
  to allow debugging the staff.html page
  [tiberich #17040]
* Change: update URL to the Munin email queue
  [ghicaale refs #17222]

7.7 - (2013-10-08)
------------------
* Bug fix: no longer crash when there is a content type within a content type
  with keyFact classes and automatick SOERKeyFact are created
  [ichimdav refs #17005]
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types
  [voineali refs #17008]
* Feature: Add crop image action for SOER 2015 ctype Fiche
  [voineali refs #17008]

7.6 - (2013-10-04)
------------------
* Change: removed requirement for hachoir_core from Products.EEAContentTypes
  [ichimdav refs #15651]
* Change: removed traces of Products.kupu from Products.EEAContentTypes
  [ichimdav refs #15651]
* Change: updated zope imports with the versions that require minimum Plone 4.1
  for Products.EEAContentTypes
  [ichimdav refs #15651]
* Upgrade step:
   - Run before using the upgrade from prefs_install_products_form
   - Go to www/portal_workflow/manage_selectWorkflows >
      - Remove the workflow for SOERKeyFact
      - Hit Change button
   - [ichimdav #9476]
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types
  [ichimdav #9476]
* Feature: added upgrade steps to remove workflow from SOERKeyFact and publish
  it's parent folder
  [ichimdav #9476]
* Added validator that can construct SOERKeyFact objects if text has keyFact
  class, enabled for Highlight Content Type
  [ichimdav #9476]

7.5 - (2013-09-23)
------------------
* Feature: Assigned versionId to PloneGazette Newsletter and NewsletterTheme through
  upgrade step.
  [tiberich #16776]
* Bug: Removed Arabic from language list in top menu.
  [prospchr fixes #16755]
* Upgrade step:
   - Restart memcached on production.

7.4 - (2013-09-06)
------------------

7.3 - (2013-08-28)
------------------
* Feature: Added ManagementPlan field to all SOER 2015 Content-Types
  [voineali refs #14900]
* Bug fix: fixed SKOS view after upgrade to Plone 4.3
  [ichimdav #16291]

7.2 - (2013-08-09)
------------------
* Change: removed upgrade step for cleanup of tags from egg 6.6 for this
  upgrade to Plone 4.3
  [ichimdav refs #14323]
* Bug fix: fixed forward and backward after changes done in 7.1
  [ichimdav refs #14863]
* Change: Remove dependency to cornerstone.feed.zope
  [szabozo0 refs #14323]

7.1 - (2013-08-07)
------------------
* Bugfix: no longer compute possible relation for every forward or backward
  relation when retriving the auto relation of non canonical objects
  [ichimdav refs #14863]
* Feature: added a plone.app.contentrules action to enable/disable
  discussions based on rules
  [tiberich #14858]
* Feature: Plone 4.3 compatibility
    - removed 3rd party syndication products (bda.feed, Products.fatsyndication)
    - removed eea.rdfrepository
    - added custom RSS2 feed using standard Plone 4.3 syndication framework
    - [batradav refs #14323]

7.0 - (2013-07-25)
------------------
* Feature: removed p4a.video dependency
  [ichimdav #15234]
* WIP: added a plone.app.contentrules action to enable/disable
  discussions based on rules
  [tiberich #14858]
* Bug fix: added adapter registration implementing IFeed for ICollection
  types, fixes /RSS2 view for feeds
  [tiberich #14915]
* Cleanup: Deprecated p4a.subtyper and remove hard dependency on it (
  is optional now and it will be removed in a later version of this pacakge)
  [voineali refs #15234]
* Bug fix: implemented a field2surf adapter for fields named 'provenances'.
  This applies to DavizVisualization's @@rdf view.
  [tiberich #14824]
* Upgrade Step: in
  http://www.eea.europa.eu/aq_parent/portal_properties/rdfmarshaller_properties
  remove the "provenances" field from the "blacklist" list.
  [tiberich #14824]

6.9 - (2013-07-08)
------------------
* Bug fix: fixed duplication of auto relations when retriving them from a non
  canonical object
  [ichimdav refs #14831]

6.8 - (2013-06-17)
------------------
* Feature: added ManagementPlanField for content described in the ticket, such
  as IInteractiveData and IInteractiveMap
  [ichimdav #14719]
* Upgrade step: Within "Plone > Site setup > Add-ons" click on
  upgrade button available for EEA Content Types (be aware of previous upgrade
  steps that may require additional manual steps. If you're not sure about this,
  you can always run these steps from ZMI > portal_setup > Upgrades Tab and
  choose Products.EEAContentTypes:default)
  [voineali refs #14675]
* Bug fix: Fix content-rules for GIS Application and other EEA Content-Types
  by adding them to portal_factory
  [voineali refs #14675]
* Bug fix: added a possibility to simplify the schemata_edit form, to not
  include so many items such as a header and type description
  [tiberich #14562]
* Feature: added /download method for Article/Highlight/PressRelease/Promotion and Speech
  to have same API as Image like objects.
  [ghicaale refs #14735]

6.7 - (2013-05-20)
------------------
* Bug fix: fixed ReST merkup under HISTORY.txt
  [ghicaale refs #14554]

6.6 - (2013-05-20)
------------------
* Bug fix: show a visual cue that a wait time might be needed when editing a
  content object in a popup dialog, in the eea.relations popup
  [tiberich #14467]
* Feature: index all subjects/keywords lowercase
  [ghicaale refs #14384]
* Feature: store all subjects/keywords lowercase
  [ghicaale refs #14384]
* Upgrade step:
   - re-save (re-index 'Subject' index) all content types from the portal via a script from /www/0maintenance
   - this operation should be done via www8 instance, using intermediate transaction commits as it will be a very long process
   - ideally to be done outside EEA workin hours not to conflict with current editing
   - based on /www/0maintenance/.find-searchareas-using-subject report update all collections/facetednav to use lowercase subjects
   - [ghicaale refs #14384]
* Change: refactor marshaller.py to conform to eea.versions API changes,
  change tests to reflect the fact that random objects are no longer versionable by
  default
  [tiberich #14008]
* Upgrade step:
   - If #14383 is not closed, ask Alec/Antonio first to run this step
   - Within "Plone > Site setup > Add-ons" click on upgrade button available for EEA Content Types (must pe run under www8)
   - [voineali refs #9552]
* Cleanup: Remove "eea.related_multimedia" viewlet
  [voineali refs #9552]
* Added upgrade to cleanup tags
  [ghicaale refs #14383]
* Feature: Removed lovely.memcached dependency
  [voineali refs #14343]
* Bug fix: Fixed reorder of css and javascript when reordering resources in the view @@reorder.
  [prospchr fixes #14337]

6.5 - (2013-04-17)
------------------
* Bug fix: fixed HISTORY.txt RST markup
  [ghicaale refs #14321]

6.4 - (2013-04-17)
------------------
* Bug fix: Fixed full screen mode for interactive maps
  [ichimdav #14215]
* Bug fix: Fixed wrong tal statement in translation template
  [prospchr refs #14270]

6.3 - (2013-03-15)
------------------
* Bug fix: Added a try except clause when trying to retrieve theme title for
  sameTypeByTheme to avoid future LookupError exceptions
  [ichimdav #14108]
* Bug fix: check if themes is available to correct a potential bug when calling
  sameTypeByTheme
  [ichimdav #14109]
* Change: Confimation and action emails are now sent only in english.
  [prospchr]
* Better display concatenated resources under @@reorder_css
  [ghicaale refs #14067]

6.2 - (2013-02-27)
------------------
* Bug fix: check with getattr non_deprecatedthemes since ExternalDataSpec
  Theme object doesn't have that property
  [ichimdav #13986]
* Bug fix: re added moreLink logic for document_relateditems.pt
  [ichimdav #13994]
* Bug fix: Keep consistency in AutoRelations adapter returning values
  [voineali]
* Bug fix: Change the translation domain from eea to eea.notranslation on
  gis_view.pt.
  [prospchr refs #13770]

6.1 - (2013-02-25)
------------------
* Change: optimized smartfolder.py logic responsible for latest events popup
  from cross_site_top
  [ichimdav #13771]
* Change: optimized sameTypeByTheme which is responsible for the latest
  addition portlet logic
  [ichimdav #13771]
* Change: optimized autoContext relations which is called on video_popup_view
  [ichimdav #13771]
* Bug fix: getattr isCanonical for the relations canonical check to avoid
  portal_relations error
  [ichimdav]
* Change: disabled eea_keywords macro setting for subject since we already
  provide a different macro with the eea.tags widget
  [ichimdav #13771]
* Change: removed copying of schema to speed up schema modifier which sets a
  different widget for location, themes and subject
  [ichimdav #13771]
* Bug fix: fix css for resource reordering page
  [tiberich #10231]
* Bug fix: Corrected missing i18n attributes for translations.
  [prospchr refs #13827]
* Bug fix: Added domain=eea.notranslation to views that don't need
  translations.
  [prospchr refs #13827]

6.0 - (2013-02-05)
------------------
* Bug fix: bring back initialization code for EEAContentTypes. Fixes
  eea.themecentre tests
  [tiberich]
* Bug fix: Corrected errors in code.
* Bug Fix: Removed the possibility to edit relations for translated objects.
  [prospchr refs #9569]
* Upgrade step: Need to run the script that remove the relations on translated objects:
   - Check that the back-up has been done :-)
   - In the ZMI, go to 0maintenance
   - Add an External Method, call it clean_relations_of_translated_items
      - Module name: Products.EEAPloneAdmin.clean_relations_of_translated_items
      - Function Name: clean_relations
   - Run it

5.9 - (2013-01-28)
------------------
* Change: removed the munin chart from the cms activity portlet,
  since the munin plugin is disabled.
  [demarant]
* Bug fix: fix unauthorised to access Title in portlet cms activity
  for Authenticated role (when eionet users doing comments in IMS).
  [demarant refs #9512]
* Bug Fix: Fixed Relations for multilingual objects. Now, when
  opening a translated content, the relation widget reflects the
  relations on the Canonical object (EN).
  [prospchr refs #9569]

5.8 - (2013-01-15)
------------------
* Feature: Added portlet to monitor content updates activity.
  [demarant fixes #9512]
* Feature: Better user feedback when sending newsletters.
  Added portlet to show emails queue status via munin.
  [demarant fixes #10268]
* Change: speedup. do not show workflow emails adresses in state > advanced.
  [demarant refs #9985]
* Bug fix: return auto relations in reverse order from newest to oldest
  [ichimdav #9272]
* Upgrade step: on instances other than production go to www/portal_types/Article:
   - Add 'Folder' in the list of allowed contenttypes
   - This step has already been applied on production
* Change: Added Folders to allowed content types for Article
  [ichimdav #9255]
* Bug fix: Disable award notice value when CallForTender object is created in
  portal_factory
  [ichimdav #10204]

5.7 - (2012-11-29)
------------------
* Change: added customizations from productio for flas_js.dtml
  [ichimdav]
* Bug fix: fix @@rdf adapter for media field
  [tiberich #10130]

5.6 - (2012-11-22)
------------------
* Change: removed schema extender of location for Data content type
  [ichimdav #9423]
* Change: merged values from relatedProducts field to relatedItems
  field for EEAFigure and Data objects.
  [ghicaale refs #6773]
* Bug fix: change rdfmarshaller modifiers to conform to API changes, added
  test for marshaller modifiers
  [tiberich #3981]
* Bug fix: use a field adapter instead of a full content adapter for the
  Article media, for the @@rdf view
  [tiberich #3981]

5.5 - (2012-10-04)
------------------
* Change: modify code to conform to api change in eea.rdfhmarshaller
  [tiberich #5545]

5.4 - (2012-09-27)
------------------
* Bug fix: Fixed error: Couldn't import eea.daviz.content.visualization,
  No module named visualization (eea.daviz 6.0 not-released yet)
  [voineali]
* Bug fix: fixed some layers not showing up. removed fixed extent.
  for gis applications template, now zoom defined on arcgis.com is applied.
  [demarant refs #5546]

5.3 - (2012-09-27)
------------------
* Feature: added rich text field to CloudVideo to bring it up to par with the
  file based video content
  [ichimdav #5480]
* Change: Update references to eea.daviz content
  [voineali refs #5420]
* Change: Update references to eea.depiction (formerly valentine.imagescales)
  [voineali refs #5497]
* Bug fix: removed unused protect_email transform
  [ghicaale refs #4926]

5.2 - (2012-08-28)
------------------
* Upgrade step: Manual step ask ichimdav to do it
  - Set images on CloudVideos to the renamed image field
  [ichimdav #5480]
* Upgrade step: under www/portal_types/CloudVideo/manage_aliases:
   - Set "base_edit" to edit method instead of atct_edit
* Upgrade step: under www/portal_properties/site_properties:
   - Set "CloudVideo" to typesUseViewActionInListings property
* Bug fix: display view page for CloudVideo when viewing without /view
  [ichimdav #5480]
* Change: implemented default template for external promotions. Now google
  search results will have proper templates with active links.
  [demarant]
* Upgrade step: replace base_view with promotion_view in portal_types
  for type Promotion. Already done on production.
  [demarant]
* Change: removed protect_email transform
  [ghicaale refs #4926]
* Bug fix: fixed profile version number
  [ghicaale]
* Buf fix: fixed html_eea_chain transform chain
  [ghicaale]
* Upgrade step: under www/portal_setup/manage_upgrades:
   - select "Products.EEAContentTypes:default"
   - click "choose profile"
   - click "show"
   - select both upgrade steps for 4.19 to 5.2
   - click "upgrade"
   - svn del Products.EEAContentTypes/transforms/protect_email.py
   - svn commit
   - [ghicaale refs #4926]
* Bug fix: fixed EEA organigram for cases when there is no Deputy Director.
  [demarant fixes #5402]
* Bug fix: reference jquery.js in a way that is compatible also with Plone 4.2
  [ichimdav #5398]
* Bug fix: added Topic content type info in profile, to fix tests
  [tiberich #5346]
* Bug fix: fix googleEarthView logic to use IGeoTagged information instead of
  IGeoPositioned
  [ichimdav #5386]
* Bug fix: fixed google_earth page template from breaking on soer pages
  [ichimdav #5386]
* Bug fix: return a number instead of a boolean for the max number in syndication
  in order for search RSS to display more than 1 result
  [ichimdav #5354]

5.1 - (2012-07-13)
------------------
* Feature: re-enabled eea.relations widget for Base Content
  [ichimdav #4705]
* Bug fix: display validation error when translating if error is present
  [ichimdav #5302]
* Bug Fix: Fixed missing i18n attributes, i18n:domain and duplicate keys
  in .pt
  [prospchr refs #5162]

5.0 - (2012-06-20)
------------------
* Bug fix: fixed rdf dcterms:isReplacedBy (it was set to wrongly to replacedBy)
  [demarant fixes #5129]
* Bug fix: check if results are found for topics on isGeoContainer
  [ichimdav #3355]
* Bug fix: add a validator for max file size in ExternalHighlight and Promotion
  [tiberich refs #5259]
* Bug fix: removed usage of isEmpty
  [tiberich refs #5289]

4.21 - (2012-06-13)
-------------------
* Change: Images on highlights and articles are now wider and span entire
  content area. this change also fixes some floating layout issues.
  [demarant fixes #5023 refs #4206]
* Bug fix: fixed markup of HISTORY.txt file
  [ciobabog refs #5231]
* Bug fix: set effective date to now() when a content item is first published
  [tiberich #5125]
* Feature: use a subscriber to add dcterms:isReplacedBy and dcterms:replaces
  to IVersionEnhanced content
  [tiberich, demarant #5129]
* Upgrade step: in www/portal_properties/site_properties:
  - add quick_event_anonymous_creator property of type string with the name of the user
  that should be the creator of the anonymous quick events
  [ichimdav #4788]
* Upgrade step: with a serviceWWW instance from the root of the site run:
  www/SITE/@@migrate2geotags -- to migrate Events and QuickEvents to geotags
  www/SITE/@@migrate2geotags?type=Organisation -- to migrate Organisation to geotags
  [ichimdav #4788]
* Upgrade step: add an External Method called update_publications_subobjects with:
  module name -  Products.EEAContentTypes.migration_fixes
  function name - update_publications_subobjects
  Execute it
  [ghicaale refs #5178]
* Bug fix: fixed notification.py so PO files can be generated
  [prospchr #5159]
* Bug fix: added migration script to fix some figuretype for some figures
  [tiberich #5082]
* Bug fix: fixed floating issues with related portlets
  [ichimdav #5157]
* Change: geotags migration script is now transaction aware
  [ghicaale refs #4778]
* Bug fix: added body text in cft_listing_view
  [tiberich #5111]
* Upgrade step: add an External Method called fix_categories_maps with:
  module name -  Products.EEAContentTypes.migration_fixes
  function name - fix_categories_maps
  Execute it
  [tiberich #5082]

4.20 - (2012-04-27)
-------------------
* Bug fix: added view replacement for unicodeInTest
  [tiberich #5106]

4.19 - (2012-04-26)
-------------------
* Upgrade step: go to portal_setup > upgrades > Products.EEAContentTypes:default
  and run the Enabled CloudVideo contenttype from EEAContentTypes step
* Bug fix: do not show an empty portlet when there are no videos related.
  [demarant]
* Bug fix: added override for wysiwyg template which always shows richtext editor
  [tiberich #5055]

4.18 - (2012-03-30)
-------------------
* Upgrade step: import profile "Upgrade profile for EEAContentTypes 4.17" >
  Skins tool
  [tiberich #4982];
  Set default location for ExternalDataSpec, in portal_relations, to
  python:object.restrictedTraverse("/www/SITE/data-and-maps/data/external-datasets-catalog")
  Add a new portlet in the Faceted criteria tab, with type "Plone Portlet" and
  title: Create new
  path: here/portlet_addcontent/macros/portlet
* Bug fix: Fixed eea_keywords macros
  [voineali #5021]
* Bug fix: fixed unicode error when object id is normalized
  [ghicaale #4998]
* Feature: a portlet that can be used in the eea.relations portlet to add
  new content in a simple popup form
  [tiberich #4982]
* Change: relocated the schemata_edit functionality from eea.indicators here
  [tiberich #4982]
* Bug fix: load workflow emails information with ajax in content_modify_form
  [tiberich #5037]

4.17 - (2012-03-05)
-------------------
* Feature: added cloudUrl validator which is used by the cloudUrl field for flv video
  to check validation of url, extract the video id, and serve a normalized url
  [ichimdav #4963]
* Bug fix: backward compatibility for gis application with no arcgis_url set.
  [demarant #4959]
* Bug fix: added the IEEAPloneSite interface that should be provided by the EEA Plone Site
  The intention is to make it possible to create other plone sites in Data.fs that don't
  run code specific to EEA (for example some event subscribers)
* Feature: GIS Application can now have ArcGIS or EyeOnEarth embedded map.
  [demarant #4959]
* Bug fix: check if img_size is tuple since getSize could return an int value of the
  image size for non Image or IExternalHighlight content
  [ichimdav #4816]
* Change: better name for the image ratio check handler, since it is generic.
  [demarant #4816]
* Change: Added minsize validator on preview image for gis map application
  [demarant #4959]
* Change: for GIS Application use same url field for both the flash object and the url
  to an external site like Eyeonearth. adjusted labels and descriptions
  [demarant #4959]
* Change: added display_on_datacentre for IExternalHighlight
  [ichimdav #4936]
* Feature: all GIS Application objects will provide by now
  Products.EEAContentTypes.content.interfaces.IInteractiveMap interface
  [ghicaale #4467]
* Upgrade step: go to plone root /aq_parent/@@manage_interfaces and make the Plone site
  implement IEEAPloneSite
* Upgrade step: go to /portal_setup > import steps and reimport EEAContentTypes
  Action Providers steps which adds the crop action for Image and IExternalHighlights
  [ichimdav #4816]
* Upgrade step: remove duplicate Products.EEAContentTypes.content.interfaces.IInteractiveMap
  interface and reindex all GIS Application objects. Ask ghicaale to do it.
  [ghicaale #4467]

4.16 - (2012-02-15)
-------------------
* Feature: Added possibility to disable the application form for vacancy.
  Very rare use case: vacancy application for Director must be send
  to EU Commission. So property in ZMI is enough.
  [demarant]
* Bug fix: fixed an error in flasfileStyle script when it got invalid
  width/height for flash file
  [tiberich #4947]
* Bug fix: fixed error in RSS on locations where syndication is not allowed
  [tiberich #4947]
* Upgrade step: go to /portal_setup > import steps and reimport EEAContentTypes
  Action Providers steps which adds the crop action
* Feature: Changed GIS Application to be disk based product instead of TTW type
  [tiberich #4467]
* Feature: added arcgis_id field to GIS Application
  [tiberich #4467]
* Upgrade step: go to /prefs_install_products_form and upgrade EEAContentTypes to version 4.16

4.15 - (2012-02-06)
-------------------
* Change: disabled crop functionality until it is better tested to ensure
  that no issues would arrive from using it
  [ichimdav]

4.14 - (2012-02-06)
-------------------
* Feature: added 16:9 crop functionality for IExternalHighlight contentTypes
  [ichimdav #4816]
* Bug fix: fixed rss feed for at topics
  [tiberich #4992]
* Bug fix: Fixed location field and widget on Event content types
  [ghicaale #4913]
* Bug fix: Fixed iCal export for Event content types
  [ghicaale #4913]
* Bug fix: Fixed Google geocoding used on Event and QuickEvent content types
  [ghicaale #4913]
* Bug fix: Fixed geocoding subscriber to be active only for Event and QuickEvent content types
  [ghicaale #4913]
* Bug fix: show body text on events
  [demarant #4906]
* Feature: Enabled the EEA relation widget on highlights types
  [demarant #4705]
* Change: Made field visibilityLevel hidden by default and visible only
  for articles where we use it for frontpage feature article.
  [demarant]
* Bug fix: Fixed Content-Disposition for PDF files
  [voineali #4898]
* Bug fix: fixed overlapping text in organisational chart and
  replaced deprecated css_slot with style_slot
  [demarant]
* Change: Mark any Daviz presentation with Interactive Data interface.
  [demarant]
* Bug fix: replaced attribute modifiedDate (introduced in r24888 and not found
  with new plone 4) with standard dublic core modified() method.
  [demarant #4875]

4.13 - (2012-01-10)
-------------------
* Bug fix: added an override utility for p4a.videoembed that will not change
  Links with swf in their url into Videos
  [tiberich #4865]
* Bug fix: Fixed portal status message on @@sendAsNotification
  [voineali #4706]
* Bug fix: fixed reorder resources views
  [tiberich #4737]

4.12 - (2012-01-03)
-------------------
* Bug fix: updated email address for jobs enquiries
  [tiberich #4845]

4.11 - (2011-12-16)
-------------------
* Bug fix: fixed quickevent view
  [tiberich #4839]

4.10 - (2011-12-15)
-------------------
* Bug fix: Updated @@invalidate_cache browser view to use plone.app.caching
  [voineali #4689]
* Bug fix: Fixed events map JS
  [voineali #4798]

4.9 - (2011-12-07)
------------------
* Bug fix: disabled press release text from pressroom view [ichimdav #4619]

4.8 - (2011-12-02)
------------------
* Bug fix: Made location, themes and subject language independant
  [voineali #4776]
* Bug fix: fix error that caused zope created ContentManager users not able to access site
  [tiberich]

4.7 - (2011-11-29)
------------------
* Bug fix: Fixed keywords widget to keep filled values if the edit form fails to
  submit due to validation errors
  [voineali #4773]
* Bug fix: fix problem caused by redirections for Manager when creating QuickEvent
  [tiberich #4763]

4.6 - (2011-11-28)
------------------
* Bug fix: Fixed required themes, subject and location fields for specified content-types
  [voineali #4694]
* Bug fix: show only date in event_view and quickevent_view
  [tiberich #4763]

4.5 - (2011-11-28)
------------------
* Bug fix: Show description widget in edit mode for a quickevent
  [ichimdav #4789]
* Bug fix: Fixed event_view to use the old location widget
  [voineali #4736]

4.4 - (2011-11-25)
------------------
* Bug fix: Reverted location field/widget for QuickEvent and Organisation to
  eea.locationwidget as there is a lot of custom logic and it needs upgrade
  steps (same for /events map)
  [voineali #4736]

4.3 - (2011-11-23)
------------------
* Change: commented the eea.locationwidget widget for QuickEvent, as it is
  already provided by the geotags subtyper
  [tiberich #4763]
* Change: add instruction when editing location widgets
  [tiberich #4763]
* Bug fix: hide metadata fields for quickevent
  [tiberich #4763]
* Bug fix: make all fields appear in the default schemata
  [tiberich #4763]
* Bug fix: show location when viewing a QuickEvent
  [tiberich #4763]

4.2 - (2011-11-22)
------------------
* Cleanup: Fixed all pylint, pyflakes warnings
  [voineali]
* Bug fix: added workaround for failure to get filename for RSS enclosures
  [tiberich #4746]

4.1 - (2011-11-21)
------------------
* Bug fix: Removed themes from ExternalDataSpec schema as this CT gets themes
  from back references
  [voineali #4740]
* Bug fix: added header for rssAllowed script
  [tiberich #4738]
* Bug fix: make getModifiedDate return a DateTime object for folder based feeds
  [tiberich #4739]

4.0 - (2011-11-18)
------------------
* Bug fix: Removed date fields from frontpage tab
  [szabozo #4708]
* Bug fix: Only include languages which have a translated eea homepage
  [demarant]
* Bug fix: Added missing image scales on the image field for IExternalHighlights
  [demarant]
* Change: Made eea geotag required for IExternalHighlight via schemaextender
  [demarant #4694]
* Change: Migrated promolink_view from custom
  [szabozo0 #4161]
* Bug fix: Added on-error handler to related_multimedia portlet, it
  triggers errors in portal_relations view
  [tiberich #4690]
* Change: Migrated portlet_center_map from custom
  [szabozo0 #4161]
* Change: Migrated flashfileStyle, rssAllowed from custom
  [szabozo0 #4161 #4685]
* Bug fix: make document_mediatop_view use standard macros for viewing documents
  [tiberich #4681]
* Change: Migrated cft_listing from custom
  [szabozo0 #4161 #4685]
* Bug fix: Enabled resize.js
  [szabozo0 #4667]
* Bug fix: added AssessmentPart to list of content types that are displayed as Other related items
  [tiberich #4629]
* Bug fix: use dcterms namespace instead of dc in @@rdf view (backport v2.30)
  [tiberich #4250]
* Change: allow hiding the subtyper menu based on context portal type; renamed Topic subtyper as video container
  [tiberich #4582]
* Optimization: changed the way the related information is computed to optimize load times
  [tiberich #4510]
* Bugfix: Fixed maps right widget (countries)
  [szabozo0 #4510]
* Change: Fixed the video template to fill slot content-core. Made all the related
  templates available as viewlets and registered below content body.
* Bugfix: Fixed IE JS errors, fixed code that uses jQuery to avoid conflicts
  with other JS frameworks
  [szabozo0 #4542]
* Change: Design fix, moved the "related multimedia content" from the floating slot in document
  to the bottom, due to smaller content column width. (will be converted to viewlets)
  [demarant #4537]
* Change: Replace plone 4 default location field with eea.geotags location field
  [szabozo #4510]
* Bugfix: Fixed Images on PressRelease
  [szabozo0 #4510]
* Change: Removed portlet themes from highlights view since we now use it as viewlet below title
  [demarant #4206, #4458].
* Bugfix: Removed import of swfobject.js (it's included in portal_javascripts), fixed interactive maps
  [szabozo0 #4446]
* Feature: Added Spotlight promotion type
  [szabozo0 #4425]
* Bug fix: Fixed helpcenter_view template for Products.PloneHelpCenter 4.0
  [szabozo0 #4430 #4431]
* Bug fix: Fixed view for Quick Event, EEA Job Vacancy
  [szabozo0 #4431]
* Bug fix: Fixed Tooltip for Article and Highlight. Don't forget to reimport the profile
  [szabozo0 #4431]
* Change: Included ManagementPlan Field and Widget from eea.forms instead of eea.dataservice
  [szabozo0 #4423]
* TODO: there are a lot of issues to complete the migration, search for "plone4"
* Bug fix: fix swf upload, flash view
* Change: Rename FlashFile to Animation (swf)
  [szabozo0 #4379]
* Feature: Added upgrade steps
  [voineali #4392]
* Feature: migrated to Plone 4.0.4
  [tiberich #4277]

2.29-dev - (unreleased)
-----------------------
* Bug fix: fixed "send as notification"
  [ghicaale]

2.28 - (2011-04-20)
-------------------
* Bug fix: Change schema extension to adapt IVideoEnhanced instead of IBaseContent
  [szabozo0 #4260]

2.27 - (2011-04-19)
-------------------
* Feature: Extend schema with location field
  [szabozo0 #4260]
* Bug fix: Added migration fix script for images and files positions in parents
  [tiberich #4135]

2.26 - (2011-04-07)
-------------------
* Bug fix: Fixed staff list
  [ghicaale #4237]

2.25 - (2011-04-01)
-------------------
* Cleanup: Removed PloneRSSPortlet
  [voineali #4169]
* Feature: added rss feeds adaptor for ATFolders
  [ichimdav #4202]
* Change: Updated FlashFile file field to blob and added migration script
  for it. See Upgrade steps bellow
  [voineali #4200]
* Change: Updated ExternalHighlight image field to blob and added migration
  script for it. See Upgrade steps bellow
  [voineali #4200]
* Bug fix: Refactoring Organisation BrowserView adapter as having logic in
  __init__ can break other packages while using queryMultiAdapter
  [voineali #4196]
* Cleanup: of pyflakes compiler errors
  [ichimdav #4141]
* Cleanup: of pylint violations
  [ichimdav #4140]
* Cleanup: Removed .mo file as they are auto-generated now
  [voineali #4139]
* Cleanup: Removed portal_migration scripts as portal_migration is deprecated.
  Please check that there are no un-applied migration scripts before
  upgrading to this version
  [voineali #4139]
* Cleanup: Added translation domain to ZCML files
  [voineali #4139]
* Cleanup: Fixed DeprecationWarning: CMFCorePermissions
  [voineali #4139]
* Cleanup: Fixed DeprecationWarning: CustomizationPolicies
  [voineali #4139]
* Upgrade steps:
  - Migrate EEA Content-types image field to Blob:
  - Go to <site root>/@@migrate-eea2blobs (e.g. http://eea.europa.eu/@@migrate-eea2blobs)
  - Check Portal Types to migrate and click on '''migrate''' button.

2.24 - (2011-03-08)
-------------------
* Bug fix: Fixed broken egg 2.23
  [ghicaale]

2.23 - (2011-03-08)
-------------------
* Bug fix: by now, "management_plan_code_validator" validator is registered
  from this package. This will fix the validation of "management plan code" field
  for all content types defined under this pacakge
  [ghicaale #4174]
* Feature: Test modificaton date on state change
  [voineali #3986]
* Bug fix: Cleanup tests and fix tests hang up
  [voineali #4136]

2.22 - (2011-03-01)
-------------------
* Change: removed PloneRDFCalendar & RDFEvent type
  [ichimdav #2931]
* Change: Organigram structure updated
  [ghicaale #4152]
* Bug fix: Fixed organigram print CSS
  [ghicaale #4152]

2.21 - (2011-02-21)
-------------------
* Bug fix: Invalidate varnish cache for parents image scales
  [voineali #4105]
* Bug fix: fixed code intendation
  [ghicaale #4130]
* Bug fix: fixed a bug in relationbrowser widget
  [tiberich #3241]

2.20 - (2011-02-11)
-------------------
* Bug fix: pdb removed
  [ghicaale]
* Bug fix: fixed tests when trying to get portal_cache_settings
  [ghicaale]

2.19 - (2011-02-03)
-------------------
* Bug fix: fixed editing of metadata for QuickEvents
  [tiberich #4104]

2.18 - (2011-02-01)
-------------------
* Hudson fix: Fixed zptlint warnings.
  [voineali]

2.17 - (2011-01-14)
-------------------
* Change: improve code formatting in Promotion
  [tiberich]
* Bug fix: manually specify mutator for setThemes in Promotion
  [tiberich #3972]
* Feature: Added feature to disallow certain content types to be published
  via the "advanced" state change form and bulk publishing from folder contents,
  this is needed for content types that uses the "self QA dialog box" refs #4003
  [demarant]

2.16 - (2011-01-05)
-------------------
* Bug fix: make reorder pages available in any context, because of VHM issues
  [tiberich #3411]
* Bug fix: fix css issues related to reorder pages
  [tiberich #3411]

2.15 - (2010-12-22)
-------------------
* Bug fix: Fixed error in portal_relations view
  [voineali #4020]
* Change: Added windmill tests
  [voineali #3821]
* Feature: Added reorder CSS and JS views to improve UX for portal registries
  [tiberich #3411]

2.14 - (2010-12-16)
-------------------
* Feature: added spam protection for QuickEvent content types
  [tiberich #3869]

2.13 - (2010-12-13)
-------------------
* Bug fix: humanize widget labels for CallForInterest and CallForTender objects
  [tiberich]
* Bug fix: add mutator code for CallForTender.setAwardNotice
  [tiberich #3969]

2.12 - (2010-12-03)
-------------------
* Bug fix: don't throw error anymore when calling SKOS on an not-topic object
  [tiberich #3945]

2.11 - (2010-11-29)
-------------------
* Bug fix: added a custom Article2Surf adapter to fix @@rdf view for articles
  [tiberich #3893]

2.10 - (2010-11-24)
-------------------
* Bug fix: 'video-fancybox' CSS class present on non-video files
  [voineali #3895]
* Change: Cleaned up history and update methods
  [ghicaale]

2.9.2 - (2010-10-20)
--------------------
* Bug fix: Removed pdb
  [vincisas]

2.9.1 - (2010-10-13)
--------------------
* Bug fix: Language code is only checked in the beginning of the URL
  [vincisas #3746]

2.9 - (2010-09-30)
------------------
* Change: Rerelease to use zip format instead of tar.gz; Nothing has changed since previous release
  [tiberich #3642]

2.8 - (2010-09-29)
------------------
* Bug fix: now workflow sends email even when states goes to visible/hide and eionet level, refs #2041 and #3640
  [demarant]

2.7 (2010-09-06)
----------------
* Feature: Added general portlet "Most referenced"
  [demarant,ghicaale #3477]

2.6 (2010-08-16)
----------------
* Change: Use new fancybox based video popup
  [thuliper #3040]

2.4 (2010-08-04)
----------------
* Bug fix: Fixed creative common icon path in colophon to reduce dns lookup
  and improve spped, the original was nnot cached
  [demarant]

2.3 (2010-07-01)
----------------
* Bug fixed: Fixed failing tests
  [vincisas]

2.2 (2010--06-16)
------------------
* Feature: Added migration step for eea.jquery
  [thuliper, #3451]
* Bug fix: Fixed bug in GIS Application edit form where wrong
  URL was displayed
  [thuliper, #3404]
* Change: Merged subfolder_view and dc_view
  [thuliper, #3372]
* Bug fix: Added migration script to fix inconsistent catalog values
  for getThemes index. See portal_migration
  [voineali #3332]
* Change: When eeastaff.xml is empty will not be uploaded into Plone so
  we keep last valid version of eeastaff.xml
  [ghicaale]

2.1 (2010-05-10)
----------------
* Bug fix: Make sure migration step publishes the 'dc' documents
  [thuliper]

2.0 (2010-05-07)
----------------
* Feature: Migration step for theme data centres
  [thuliper #2939]
* Feature: Added marker interface for data viewers so we can list them
  together with interactive maps on data centre
  [demarant #2939]
* Feature: Added portal_migration function that sets up the 'dc' themes folders
  [thulin #3254]

1.9 (2010-03-26)
----------------
* Change: Make image 'rights' field language independant
  [thulin #3164]
* Bug fix: Fixed import step for adding EEA internal IPs under portal_properties.
  [ghicaale #2996]

1.8 (2010-03-16)
----------------
* Feature: Avoid too long url, make id shorter on creation
  [voineali #2807]
* Bug fix: Fixed when david clicks on "derived datasets" browse button to pick
  a relation he is asked to login
  [voineali #3018]
* Bug fix: Fixed ReferenceWidget asks for more permissions, even though user
  has local Manager role
  [voineali #3082]

1.7 (2010-03-08)
----------------
* Feature: Internal EEA IPs can now be set from portal_properties.
  [ghicaale #2996]

1.6 (2010-02-16)
----------------
* Change: Internal EEA IPs updated for invalidate cache.
  [ghicaale #2996]

1.5 (2010-01-18)
----------------
* Change: Make kupu configuration use our transform chain instead of their default
  [vincisas #2882]
* Feature: Added faceted navigation widget for context theme tags
  [voineali #2616]

1.4 (2010-01-04)
----------------
* Feature: Functional tests for dataservice added
  [ghicaale #2880]
* Change: Events map height and width are now set after map ie generated as
  if map html element is hidden by default this values are reseted to 400px X 400px
  by YMap API
  [ghicaale #2771]
* Bug fix: Changed  handler function name for single maps not to conflit with
  events map handler
  [ghicaale #2771]

1.3 (2009-12-04)
----------------
* Feature: Thumbnails generated with valentine.imagescales view in RSS2 feeds
  [vincisas #2140]
* Change: More flexible path configuration for staff file
  [vincisas #2844]

1.2 (2009-11-27)
----------------
* Change; Added "relatesTo" parameter to "def backReferences"
  [ghicaale #2823]
* Bug fix: Fix organigram width on lower resolutions
  [voineali #2830]

1.1 (2009-11-10)
----------------
* Initial release

